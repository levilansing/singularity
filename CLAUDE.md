# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## What This Is

A React SPA that displays countdown timers for various AI singularity predictions. Each prediction has a dedicated page with a countdown, prediction details, concept explainers, and a timeline visualization of all predictions. Deployed to Cloudflare Pages.

## Commands

- `bun run dev` — start dev server with watch mode
- `bun run build` — production build (outputs to `dist/`)
- `bun run deploy` — build + deploy to Cloudflare Pages
- `bun test` — run tests

## Bun-First Development

Use Bun for everything. No Node.js, npm, vite, express, or other alternatives.

- `bun install` for dependencies
- `bun run <script>` for package.json scripts
- `Bun.serve()` with HTML imports for the server (no vite)
- `Bun.file()` over `node:fs`

## Design & Content

Copy should be sarcastic, fun, and informative. The page should be interactive and engaging. It needs to work well on desktop and mobile.

## Architecture

**Server**: `src/index.tsx` — Bun.serve with HTML imports, serves `src/index.html` as SPA with static file routes for headshots.

**Frontend entry**: `src/frontend.tsx` — mounts React app with BrowserRouter.

**App routing** (`src/App.tsx`): react-router-dom v7 with routes `/:id/*` (prediction page) and `/` (random prediction). URLs use slugified predictor names via `slugify()` in `src/data/types.ts`.

**Data flow**: Predictions loaded from `src/data/predictions.json` (generated by `scripts/convert-csv.ts` from `data/predictions-v2.csv`). The `Prediction` interface is in `src/data/types.ts`.

**Styling**: Tailwind CSS v4 with CSS custom properties for urgency-based theming (`urgency-past`, `urgency-imminent`, `urgency-near`, `urgency-far`, `urgency-philosophical`) defined in `src/index.css`. Body class is set dynamically based on selected prediction's urgency level.

**Key components**: Countdown (animated digit flip), Timeline (SVG visualization), PredictionCard (details display), ConceptBlurbs (concept explanations from `src/data/concepts.ts`), PredictionPicker (dropdown selector).

## Build

`build.ts` uses `Bun.build()` with `bun-plugin-tailwind` and outputs to `dist/`. The build copies `public/` assets and generates a Cloudflare Pages `_redirects` file for SPA routing.
